bind_address: "0.0.0.0"

upstream:
  bootstrap_servers:
    - "pkc-312o0.ap-southeast-1.aws.confluent.cloud:9092"
  security_protocol: "SASL_SSL"
  sasl_mechanism: "PLAIN"
  tls:
    ca_certs: "server_ca.pem"
    trust_server_certs: false

downstream:
  security_protocol: "SSL"
  tls:
    mtls_enabled: false
    cert: "server.pem"
    key: "server_key.pem"
    ca_certs: "ca.pem"

broker_mapping:
  mode: "sni"
  sni:
    bind_port: 9092
    upstream: "(.*)"
    downstream: "b<$id>.beatbox.com"

auth_swap:
  enabled: true
  # one-way TLS -> downstream principal resolves as $anonymous
  upstream_credentials:
    - "${APIK1}=${APIS1}"
  mapping:
    - "$anonymous=${APIK1}"

resolve: []
